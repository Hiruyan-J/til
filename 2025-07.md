# ** 7/1(火) **
### 【学習時間】
3.2h(累計:765h/1,000h)
  
### 【学習内容】
- 卒業制作
	- issueベースの開発

___
## 卒制記録
[GitHub](https://github.com/Hiruyan-J/GinLog)
### 【やったこと】
  - ER図作成
  - issue切り
### 【ひとこと】
ER図の作成が終わり、issue切りも終わりました！
これからいよいよ開発です！



# ** 7/3(木) **
### 【学習時間】
4.5h(累計:773h/1,000h)
  
### 【学習内容】
- 応用STEP_ruby
  - Ch1 アルゴリズム演習 
  - Ch2 名前を省略しない
  - Ch3 プリミティブ型と文字列型をラップする
- 卒業制作

  
### 【課題を通して学んだこと】
マジックナンバーは実装しないこと！
  
___
## 卒制記録
https://github.com/Hiruyan-J/GinLog
### 【やったこと】
- Rails new
- Renderへのデプロイ
  
### 【学んだこと】（知識・タスク分解などの振り返り）  
何回かデプロイすると、だんだん1つ1つの作業の理解度が高まってきますね！
繰り返し大事！
  

### 【今後の予定】
- [ ] アプリケーションの基本設定

___
卒制の開発に着手しました！
ずっと、FigmaやDBdiagram.ioとにらめっこしていたので、久々のVScodeのため、ショートカットキーやコマンドを若干忘れています。
最初に基本的なGemのインストールをしようかと思います。 
- TailwindCSS (導入済み)
- pry-byebug
- pry-rails
- pry-doc
- awesome_print
- tapp
- bullet
- Daisy UI
辺りをとりあえず入れようとは考えています。
開発する上で、皆さんのおすすめGemがあったら教えていただけると嬉しいです。

icon等は、[Google Material Symbols and Icons](https://fonts.google.com/icons)を使用しようと思います。
[material_icons](https://github.com/Angelmmiguel/material_icons)というGemがあるので、これで実装してみようかな？🤔
Font Awesomeは、無料枠だと使えるicon少ないので、考え中です。
みんなicon関連どうしてるのかな🤔



# ** 7/6(日) **
### 【学習時間】
4.58h(累計:786.9h/1,000h)
  
### 【学習内容】
- 卒制
  
___
## 卒制記録
https://github.com/Hiruyan-J/GinLog
### 【やったこと】
- TailWindCSSのアップグレード
- DaisyUIのインストール
- Google Fonts Material Symbols
  
### 【学んだこと】（知識・タスク分解などの振り返り）  
- ** yarnについて **
	- Node.js**(JavaScript)**のパッケージマネージャー(RailsのBundlerのようなもの)
	- パッケージ(RailsでいうGem)をインストールできる
	- Ruby on Rails5.1から標準対応

-  ** Google material symbols **
	- 以前悩んでいたアイコンについては、Gem等を使わずに[Google Fonts の Material Symbols](https://fonts.google.com/icons?icon.style=Outlined)の公式に従い、htmlとcssでアイコンを使えるように設定してみました！
		- htmlのクラスに`fill`を付けると塗りつぶしに変えられるようにしました。良ければご参考ください！
	- 参考
		- https://developers.google.com/fonts/docs/material_symbols?hl=ja#variable_font_with_google_fonts
	- app/assets/stylesheets/material_symbols.css作成
	    
		```css
		.material-symbols-rounded {
		  font-variation-settings:
		  'FILL' 0,
		  'wght' 400,
		  'GRAD' 0,
		  'opsz' 24
		}
		
		/* 推奨アイコンサイズ */
		span.ms-size-24 {
		  font-size: 24px;
		  font-variation-settings: 'OPSZ' 24;
		}
		span.ms-size-40 {
		  font-size: 40px;
		  font-variation-settings: 'OPSZ' 40;
		}
		span.ms-size-48 {
		  font-size: 48px;
		  font-variation-settings: 'OPSZ' 48;
		}
		
		span.ms-size-60 {
		  font-size: 60px;
		  font-variation-settings: 'OPSZ' 60;
		}
		
		/* 塗りつぶし設定 */
		span.ms-fill {
		  font-variation-settings: 'FILL' 1;
		}
		
		/* 明るい背景に黒としてアイコンを使用する際のルール */
		.dark {
		  background: black;
		  color: rgba(255, 255, 255, 1);
		  font-variation-settings: 'GRAD' -25;
		}
		.dark-inactive {
		  background: black;
		  color: rgba(255, 255, 255, 0.3);
		  font-variation-settings: 'GRAD' -25;
		}
		```
		
	- app/assets/stylesheets/application.cssから先程のcssを読み込めるようにする
	    
		```css
		/*
		 *= require material_symbols
		 */
		```
	    
	    - app/assets/stylesheets/application.cssに `*= require_tree .` の記載があれば、不要
	- app/views/layouts/application.html.erbのheadタグ内に以下のコード追加
	    
		```html
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" /> 
		```    
		

	- html.erbのアイコンを表示させたい箇所にspanタグで記載    
		```html
		<span class="material-symbols-rounded">home</span>
		<span class="material-symbols-rounded ms-size-48">favorite</span>
		<span class="material-symbols-rounded dark">settings</span>
		<span class="material-symbols-rounded ms-size-40 ms-fill">home</span>
		<span class="material-symbols-rounded " style="color: green;">search</span>
		<span class="material-symbols-rounded ms-size-40 ms-fill" style="color: blue;">home</span>
		```
	  
	- こんな感じで表示されます！
	  [![Image from Gyazo](https://i.gyazo.com/69b46b1323277425d6ac0c2162c60aa5.png)](https://gyazo.com/69b46b1323277425d6ac0c2162c60aa5)

  
### 【今後の予定】
ヘッダーの実装と、Deviseの実装を行っていきます！



# 7/12
## 卒制記録
https://github.com/Hiruyan-J/GinLog

## 【やったこと】
 Devise標準のフラッシュタイプの変換
___
### 【1】課題

DeviseとDaisyUIの連携において、フラッシュメッセージの表示に課題がありました。具体的には、Deviseが標準で出力するフラッシュタイプ（`notice`、`alert`）と、DaisyUIがフラッシュメッセージ表示に用いるCSSクラス（`info`、`success`、`warning`、`error`）に差異があったため、そのままではDeviseのフラッシュメッセージが正しく表示されませんでした。

- DaisyUIのフラッシュメッセージ  
    [![Image from Gyazo](https://i.gyazo.com/2f44609c736a6c10725851a36cb17f49.png)](https://gyazo.com/2f44609c736a6c10725851a36cb17f49)  
    `success`なら緑、`error` なら赤背景でフラッシュメッセージが表示される
    
- Devseのフラッシュメッセージ    
    [![Image from Gyazo](https://i.gyazo.com/92aedb5b0a5ca3e03b51e9dc1747682a.png)](https://gyazo.com/92aedb5b0a5ca3e03b51e9dc1747682a)  
    フラシュタイプが`notice` の為、DaisyUIの背景色設定がフラッシュメッセージに適応されていない
    
___
### 【2】実施した対応概要

この課題に対し、DeviseのフラッシュタイプをDaisyUIのCSSクラスに合わせて変換する対応を実施しました。具体的には、`notice` を `success` に、`alert` を `error` に変換する処理を行い、この変換ロジックは保守性を考慮しヘルパーメソッドとして実装しました。
___
### 【3】施策の候補と採用・不採用理由

### 採用しなかった対策

- **Deviseをオーバーライドする**
    - フラッシュメッセージを出力しているコントローラすべてをオーバーライドする必要があり、広範な修正が必要となるため、この方法は採用を見送りました。
- **`alert-notice` や `alert-error` のカスタムCSSを作成する**
    - DaisyUIのテーマを変更した場合、カスタムCSSも手動で変更する必要があり、メンテナンス性に課題がありました。
    - また、Tailwind CSSはビルド時にHTMLに明示的に記載されているCSSクラスしか生成しないため、カスタムCSSクラスを`safelist` オプションに明示的に追加する必要がありました。カスタムクラスが増えるたびに`safelist`の管理が煩雑になるため、この方法も不採用としました。

### 採用した対策

- **Deviseから出力されるフラッシュメッセージのフラッシュタイプを変換する**
    - 変換が必要なフラッシュタイプが2種類のみと少なく、フラッシュメッセージを表示するパーシャル内でヘルパーメソッドを使って変換するだけで済むため、最も影響範囲が小さくシンプルな解決策であると判断し、この方法を採用しました。
___
### 【4】具体的な対応内容

- **フラッシュメッセージの変換**
    - DeviseのフラッシュタイプをDaisyUIのCSSクラスに変換するためのヘルパーメソッドを `app/helpers/application_helper.rb` に定義しました。
    - app/helpers/application_helper.rb
        
        ```ruby
        module ApplicationHelper
          # DeviseなどのflashタイプをDaisyUIのクラス名に変換する
          def flash_class_for(type)
            case type.to_s
            when "notice"
              "success"
            when "alert"
              "error"
            else
              type.to_s
            end
          end
        end
        ```
        
- **フラッシュメッセージの表示部**
    - 上記ヘルパーメソッドを利用して、フラッシュメッセージを表示するパーシャル `app/views/shared/_flash_message.html.erb` を修正しました。
    - app/views/shared/_flash_message.html.erb
        
        ```ruby
        <% flash.each do |message_type, message| %>
          <div class="alert alert-<%= flash_class_for(message_type) %>">
            <%= message %>
          </div>
        <% end %>
        
        ```
        
___
### 【5】対応結果

- この対応により、Deviseのデフォルトフラッシュタイプ (`notice`, `alert`) をDaisyUIのCSSクラス (`success`, `error`) に変換し、期待通りにフラッシュメッセージを表示できるようになりました。
- Deviseの`notice` のフラッシュメッセージ  
    [![Image from Gyazo](https://i.gyazo.com/3e84d6a289a2ca16274724866ac9c539.png)](https://gyazo.com/3e84d6a289a2ca16274724866ac9c539)  
    DaisyUIの `success` の緑背景で表示されてる
- Deviseの`alert`のフラッシュメッセージ  
    [![Image from Gyazo](https://i.gyazo.com/962fe904607231cdefb8c143cf225ef0.png)](https://gyazo.com/962fe904607231cdefb8c143cf225ef0)  
    DaisyUIの `error` の赤背景で表示されている

  