11/21(木)
**【学習時間】**
2.3h
  
**【学習内容】**
- 入門_Ruby入門
	- Ch5.配列で扱うメソッド(途中)  
**【課題を通して学んだこと】**（知識・タスク分解などの振り返り）
- バブルソートが出てきた。
    - サンプルで出てきたバブルソートのコードは、冗長であると感じた。
      カリキュラムのサンプルコード（一部改変）
       ```ruby
      numbers = [9, 5, 3, 8, 1, 2, 7, 4, 6, 0]
      comparison_count = 0 # 比較回数を数える変数
      numbers.size.times do
        (numbers.size - 1).times do |j|
          comparison_count += 1 #比較回数カウント
          if numbers[j] > numbers[j + 1]
            tmp_number = numbers[j]
            numbers[j] = numbers[j + 1]
            numbers[j + 1] = tmp_number
          end
        end
      end
      p numbers
      puts "比較回数：#{comparison_count}"
      ```
        - このコードは、n個の要素の配列を並び替えるのに、`n × (n-1)` 回の要素の比較をしている
    - しかし、n個の要素の配列を並び替えるのに、 `n × (n-1)` 回の要素の比較をする必要はないのではないかと考えた。なぜなら
        - 一番大きい数字は、n-1回の並び替えで一番後ろになり確定される
        - 二番目に大きい数字は、(n-1)+(n-2)回目の並び替えで後ろから2番目で確定される
        - 三番目に大きい数字は、(n-1)+(n-2)+(n-3)回目の並び替えで後ろから3番目で確定される
        - …  
       といった具合に、後ろの配列要素を確定していけるからである。  

    - そのため、 `(n-1) + (n-2) + (n-3)・・・+1` 回で十分ではないか？
        - なんか、高校の頃に見た数式だ。そんな遥か昔のことは とっくに忘れているので、ChatGPTに聞いてみた
        - これは、等差数列とやららしい。
        - 式を簡略化すると、 `n × (n-1) / 2` となるとのこと。
    - つまり、サンプルのバブルソートのコードの **比較回数を半分にすることができるはず** である。
    - 疑問を解消するために、自分でコードを改良してみた
        
        ```ruby
       numbers = [9, 5, 3, 8, 1, 2, 7, 4, 6, 0]
       comparison_count = 0 # 比較回数を数える変数
       (numbers.size - 1).times do |i|
           (numbers.size - 1 - i).times do |j|
               comparison_count += 1
               if numbers[j] > numbers[j + 1]
                   tmp_number = numbers[j]
                   numbers[j] = numbers[j + 1]
                   numbers[j + 1] = tmp_number
               end
           end
       end
       p numbers
       puts "比較回数：#{comparison_count}"
        ```
        
    - 結果
        
        ```ruby
        [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
        比較回数：45
        ```
        
    - うまく並び替えができている。
        - 並び替え前の配列を、
            - 一番前に最大値
            - 一番後ろに最小値  
            としているため、コードのテストとしては十分であると思われる
            
    - 比較回数も、元のコードは、90回だったので、**理論通り半減できている** 。
    - **結論、サンプルコードより2倍の速さで並び替えができるコードを作れた。**
 ___
 なんだか、カリキュラムそっちのけでわき道にそれることが多い。。。
 細かいところが気になって仕方がなくなってしまう。。。  
