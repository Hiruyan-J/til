# ** 10/6(月) **
### 【学習時間】
6.96h(累計:1023h/1,000h)
  
### 【学習内容】
- アプリ開発
  
### 【課題を通して学んだこと】
  
___
## PosiRem開発記録
[PosiRem!](https://school.runteq.jp/v3/social_portfolios/1434/web_applications/568)
### 【アプリの概要】
PosiRem! - 言葉をポジティブに変えるアプリ 秋になりお出かけも増えてくる季節になりました。 でもせっかくのお出掛けで「走らないで！」「触らないで！」 つい口から出てしまう、子供への強い言葉。 後で後悔する…そんな経験はありませんか？ PosiRem!（ポジリム）は、子供への注意言葉を優しい言葉に言い換えるお手伝いをするAIアプリです。あなたの「つい言ってしまう注意言葉」を入力するだけで、AIがポジティブな表現を3つ提案してくれます。
  
### 【やったこと】
- プロンプトの改良
	- 子供が分かりやすい例えを入れるように修正
	- 状況に応じて、子供に選択肢を渡し、子供が「自分で選んだ」ことで、自主的に行動できるように修正
- ユーザーの入力がcontrollerに渡っていなかったので改修
- Active JobでAIの変換作業をバックグラウンド処理に修正
- Turbo Streamで非同期で画面を描画
- AIのレスポンスが返ってきた後、Action CableのWebsocketで非同期で画面に表示されるように改修
- Action Cable のバックエンドを Solid Cable に置き換え
- Xシェア機能の実装
  
### 【学んだこと】（知識・タスク分解などの振り返り） 
- AIのレスポンスを非同期処理
  - AIのレスポンスに時間がかかるので、非同期処理を導入しました。
  - 流れとしては以下の通りです。
    - ユーザーがテキストを送信する(HTTPのpostリクエスト)
    - createアクションが走る
	    - バックグラウンド処理を走らせる(Active Job)
	    - Turbo Streamで画面の必要な個所だけ更新(今回は、テキストボックスクリア、投稿した内容のチャットバブルを表示、「AIが考え中です」の表示)
    - バックグラウンド処理
	    - AIにプロンプトを投げる
	    - 帰って来たらJsonをパースしてDBに保存
	    - Websocketで画面の更新内容(Turbo Stream)を配信(今回は、「考え中」の削除、AIの回答のチャットバブルの表示)
  
[![Image from Gyazo](https://i.gyazo.com/1e51997390d07fb2a09a8b9bab0c0270.gif)](https://gyazo.com/1e51997390d07fb2a09a8b9bab0c0270)
  
### 【今後の予定】
- 自動スクロール機能の実装
- 静的OGP画像

